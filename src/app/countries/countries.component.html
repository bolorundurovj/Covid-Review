<!--Spinner-->
<div class="ui dimmer" [class.active]='loading'>
  <div class="ui large text loader">Loading...</div>
</div>


<div class="flex flex-row flex-wrap flex-1 flex-grow content-start pl-16">

  <div class="h-40 lg:h-20 w-full flex flex-wrap">
    <nav id="header"
      class="bg-gray-200 w-full lg:max-w-sm flex items-center border-b-1 border-gray-300 order-2 lg:order-1">

      <div name=""
        class="text-center bg-gray-300 border-2 border-gray-200 rounded-full w-full py-3 px-4 text-gray-500 font-bold leading-tight focus:outline-none focus:bg-white focus:shadow-md">
        Default is Nigeria
      </div>

    </nav>
    <nav id="header1" class="bg-gray-100 w-auto flex-1 border-b-1 border-gray-300 order-1 lg:order-2">

      <div class="flex h-full justify-between items-center">

        <!--Search-->
        <div class="relative w-full max-w-3xl px-6">
          <div class="absolute h-10 mt-1 left-0 top-0 flex items-center pl-10">
            <svg class="h-4 w-4 fill-current text-gray-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
              <path
                d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z">
              </path>
            </svg>
          </div>

          <input id="search-toggle" #search name="search"
            (change)="updateCountry(search.value); updateChart(search.value)" type="search" placeholder="search"
            class="block w-full bg-gray-200 focus:outline-none focus:bg-white focus:shadow-md text-gray-700 font-bold rounded-full pl-12 pr-4 py-3"
            onkeyup="updateSearchResults(this.value);">
          <span class="text-gray-700 font-bold rounded-full pl-12 pr-4 py-3">Start each word in <b>CAPS</b>. i.e New
            Zealand OR use <b>Country Code</b> i.e NZ</span>

        </div>
        <!-- / Search-->

        <!--Menu-->

        <div class="flex relative inline-block pr-6">

          <div class="relative text-sm">
            <button id="userButton" class="flex items-center focus:outline-none mr-3">
              <img class="w-8 h-8 rounded-full mr-4" [src]="countryFlag" alt="Country Flag"> <span
                class="hidden md:inline-block">{{countries.country | uppercase}} </span>
            </button>
          </div>

        </div>

        <!-- / Menu -->

      </div>

    </nav>
  </div>

  <!--Dash Content -->
  <div id="dash-content" class="bg-gray-200 py-6 lg:py-0 w-full lg:max-w-sm flex flex-wrap content-start">

    <div class="w-1/2 lg:w-full">
      <div
        class="border-2 border-gray-400 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded p-6 m-2 md:mx-10 md:my-6">
        <div class="flex flex-col items-center">
          <div class="flex-shrink pr-4">
            <div class="rounded-full p-3 bg-gray-300"><i class="fa fa-users fa-fw fa-inverse text-indigo-500"></i></div>
          </div>
          <div class="flex-1">
            <h3 class="font-bold text-3xl">{{countries.confirmed | number}} <span class="text-orange-500"><i
                  class="fas fa-caret-up"></i></span></h3>
            <h5 class="font-bold text-gray-500">Total Confirmed</h5>
          </div>
        </div>
      </div>
    </div>

    <div class="w-1/2 lg:w-full">
      <div
        class="border-2 border-gray-400 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded p-6 m-2 md:mx-10 md:my-6">
        <div class="flex flex-col items-center">
          <div class="flex-shrink pr-4">
            <div class="rounded-full p-3 bg-gray-300"><i class="fas fa-users fa-fw fa-inverse text-indigo-500"></i>
            </div>
          </div>
          <div class="flex-1">
            <h3 class="font-bold text-3xl">{{countries.recovered | number}} <span class="text-green-500"><i
                  class="fas fa-caret-up"></i></span></h3>
            <h5 class="font-bold text-gray-500">Total Recovered</h5>
          </div>
        </div>
      </div>
    </div>

    <div class="w-1/2 lg:w-full">
      <div
        class="border-2 border-gray-400 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded p-6 m-2 md:mx-10 md:my-6">
        <div class="flex flex-col items-center">
          <div class="flex-shrink pr-4">
            <div class="rounded-full p-3 bg-gray-300"><i class="fas fa-users fa-fw fa-inverse text-indigo-500"></i>
            </div>
          </div>
          <div class="flex-1">
            <h3 class="font-bold text-3xl">{{countries.deaths | number}} <span class="text-red-600"><i
                  class="fas fa-caret-up"></i></span></h3>
            <h5 class="font-bold text-gray-500">Total Deaths</h5>
          </div>
        </div>
      </div>
    </div>

    <div class="w-1/2 lg:w-full">
      <div
        class="border-2 border-gray-400 border-dashed hover:border-transparent hover:bg-white hover:shadow-xl rounded p-6 m-2 md:mx-10 md:my-6">
        <div class="flex flex-col items-center">
          <div class="flex-shrink pr-4">
            <div class="rounded-full p-3 bg-gray-300"><i class="fas fa-users fa-fw fa-inverse text-indigo-500"></i>
            </div>
          </div>
          <div class="flex-1">
            <h3 class="font-bold text-3xl">{{countries.active | number}} <span class="text-gray-500"><i
                  class="fas fa-caret-up"></i></span></h3>
            <h5 class="font-bold text-gray-500">Total Active</h5>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!--Graph Content -->
  <div id="main-content" class="w-full flex-1">

    <div class="flex flex-1 flex-wrap">

      <div class="w-full xl:w-2/3 p-6 xl:max-w-6xl">
        <div class="w-full">
          <div class="border-b p-3">
            <h5 class="font-bold text-black">Graph</h5>
          </div>
          <div class="p-5">
            <google-chart [type]="chart.LineChart" [height]="chart.height" class="ct-chart ct-golden-section"
              id="chart1" style="width: 100%;" [options]="chart.options" [data]='datatable'></google-chart>
          </div>
          <div class="p-3">
            <div class="border-b p-3">
              <h5 class="font-bold text-black">Timeline of Confirmed Cases</h5>
            </div>
            <div class="container">
              <table class="text-left w-full">
                <thead class="bg-black flex text-white w-full">
                  <tr class="flex w-full mb-4">
                    <th class="p-4 w-1/4">Country</th>
                    <th class="p-4 w-1/4">Date</th>
                    <th class="p-4 w-1/4">No of Cases</th>
                  </tr>
                </thead>
                <tbody class="bg-grey-light flex flex-col items-center justify-between overflow-y-scroll w-full"
                  style="height: 50vh;">
                  <tr class="flex w-full mb-4" *ngFor="let case of dateWiseData">
                    <td class="p-4 w-1/4">{{case.country}}</td>
                    <td class="p-4 w-1/4">{{case.date | date}}</td>
                    <td class="p-4 w-1/4">{{case.cases | number}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

      </div>

    </div>

  </div>

</div>
